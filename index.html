<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Product Heads</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --criteo-orange: #ff5a00;
      --bg: #000;
      --muted: rgba(255, 90, 0, 0.65);
      --text: #fff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--criteo-orange);
      font-family: 'Space Grotesk', 'Noto Sans KR', 'Noto Sans JP', 'Noto Sans SC', 'Noto Sans TC', 'Noto Sans Devanagari', 'Noto Sans', 'Segoe UI', -apple-system, sans-serif;
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
      overflow: hidden;
    }

    .screen {
      width: 100vw;
      min-height: 100vh;
      min-height: 100dvh;
      height: 100vh;
      height: 100dvh;
      overflow: hidden;
      padding: 28px 24px 36px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
    }

    .top-row {
      width: 100%;
      max-width: 1100px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
      flex-wrap: wrap;
    }

    .language-picker {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255, 90, 0, 0.35);
      background: rgba(255, 90, 0, 0.08);
      color: var(--text);
      font-weight: 600;
      font-size: 14px;
      letter-spacing: 0.02em;
    }

    .language-select {
      appearance: none;
      background: transparent;
      border: none;
      color: var(--text);
      font-weight: 700;
      font-size: 15px;
      padding: 6px 8px;
      border-radius: 8px;
      cursor: pointer;
      outline: none;
    }

    .language-select option {
      color: #000;
    }

    .badge {
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-weight: 600;
      color: var(--muted);
      font-size: clamp(13px, 1.8vw, 16px);
    }

    .word {
      margin: 0;
      font-size: clamp(72px, 18vw, 280px);
      font-weight: 700;
      line-height: 0.95;
      text-transform: uppercase;
      width: 100%;
      max-width: 1200px;
      overflow-wrap: normal;
      word-break: keep-all;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      flex: 1;
    }

    .cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 22px;
      border-radius: 12px;
      border: 1px solid rgba(255, 90, 0, 0.35);
      background: rgba(255, 90, 0, 0.08);
      color: var(--criteo-orange);
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
    }

    .cta:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .cta:not(:disabled):active {
      transform: scale(0.98);
      background: rgba(255, 90, 0, 0.15);
      border-color: rgba(255, 90, 0, 0.55);
    }

    .note {
      color: var(--muted);
      font-size: 14px;
      line-height: 1.5;
      max-width: 540px;
      margin: 0 auto;
    }

    .orientation {
      position: absolute;
      bottom: 12px;
      right: 12px;
      padding: 8px 12px;
      border: 1px dashed rgba(255, 90, 0, 0.35);
      border-radius: 10px;
      color: var(--muted);
      font-size: 12px;
      background: rgba(255, 90, 0, 0.05);
    }

    .countdown {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 28px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 140ms ease;
      z-index: 10;
    }

    .countdown.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .revealing .screen {
      padding: 16px 12px 22px;
    }

    .revealing .cta {
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 12;
      padding: 12px 18px;
    }

    .fullscreen-btn {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 12;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255, 90, 0, 0.35);
      background: rgba(255, 90, 0, 0.08);
      color: var(--criteo-orange);
      font-size: 13px;
      font-weight: 700;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
    }

    .fullscreen-btn:active {
      transform: scale(0.98);
      background: rgba(255, 90, 0, 0.15);
      border-color: rgba(255, 90, 0, 0.55);
    }

    .countdown-number {
      font-size: clamp(120px, 20vw, 320px);
      font-weight: 800;
      line-height: 1;
      text-shadow: 0 0 30px rgba(255, 90, 0, 0.4);
    }

    .countdown-logo {
      height: clamp(42px, 7vw, 70px);
      max-width: 70vw;
      filter: drop-shadow(0 0 16px rgba(255, 90, 0, 0.35));
    }

    .status {
      font-size: 13px;
      color: var(--muted);
      margin-top: -6px;
      min-height: 18px;
    }

    .logo-word {
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    @media (orientation: portrait) {
      .orientation {
        border-style: solid;
        color: var(--criteo-orange);
        background: rgba(255, 90, 0, 0.12);
      }
    }

    .meta {
      transition: opacity 140ms ease;
    }

    .revealing .meta {
      display: none;
    }

    .revealing .word {
      font-size: clamp(88px, 22vw, 320px);
    }
  </style>
</head>
<body>
  <main class="screen">
    <div class="top-row">
      <div class="badge meta">Product Heads</div>
      <label class="language-picker" for="languageSelect">
        <span id="languageLabel">Language</span>
        <select id="languageSelect" class="language-select"></select>
      </label>
    </div>
    <p class="word" id="wordDisplay">Ready?</p>
    <button class="cta" id="generateBtn">Generate</button>
    <div class="status meta" id="statusMsg"></div>
    <p class="note meta">
      Tap Generate, hold your phone above your head, and rotate to landscape for the biggest word. We'll try to keep your screen awake while you're playing.
    </p>
    <div class="orientation meta" id="orientationMsg">Best in landscape</div>
  </main>

  <button class="fullscreen-btn" id="fullscreenBtn" type="button">Full Screen</button>

  <section class="countdown" id="countdown">
    <img class="countdown-logo" src="criteo-logo.svg" alt="Criteo logo" loading="lazy">
    <div class="countdown-number" id="countdownNumber">3</div>
  </section>

  <script>
    const locales = {
      en: {
        code: 'en',
        label: 'English',
        text: {
          ready: 'Ready?',
          generate: 'Generate',
          counting: 'Counting...',
          orientationLandscape: 'Landscape ready',
          orientationPortrait: 'Rotate for landscape',
          languageLabel: 'Language',
        },
        words: [
          'Beanbag Chair',
          'Standing Desk Converter',
          'Portable Projector',
          'Cordless Hand Vacuum',
          'Ceramic Pour Over',
          'Milk Frother',
          'Reusable Straw Set',
          'Stainless Bento Box',
          'Insulated Flask',
          'Travel Hammock',
          'Camping Stove',
          'Enamel Mug',
          'Cast Iron Skillet',
          'Dutch Oven',
          'Chef Knife',
          'Bamboo Cutting Board',
          'Silicone Baking Mat',
          'Air Fryer',
          'Induction Cooktop',
          'Rice Cooker',
          'Slow Cooker',
          'Immersion Blender',
          'Food Processor',
          'Cold Brew Maker',
          'Electric Kettle',
          'Water Filter Pitcher',
          'Carbonated Water Maker',
          'Yogurt Maker',
          'Bread Maker',
          'Ice Cream Machine',
          'Waffle Maker',
          'Sandwich Press',
          'Juicer',
          'Spice Grinder',
          'Herb Scissors',
          'Salad Spinner',
          'Reusable Produce Bags',
          'Glass Meal Prep Set',
          'Stackable Food Storage',
          'Magnetic Spice Rack',
          'Clip On Book Light',
          'Sleep Sound Machine',
          'Sunrise Alarm Clock',
          'Desk Organizer',
          'Cable Management Kit',
          'Wireless Charger',
          'Mechanical Keyboard',
          'Ergonomic Mouse',
          'Monitor Light Bar',
          'Laptop Stand',
          'Portable Monitor',
          'Bluetooth Speaker',
          'Noise Cancelling Headphones',
          'Wireless Earbuds',
          'Action Camera',
          'Instant Camera',
          'Photo Printer',
          'Travel Tripod',
          'Drone',
          'Smart Door Lock',
          'Video Doorbell',
          'Indoor Security Camera',
          'Smart Plug',
          'Smart Bulb',
          'LED Strip Lights',
          'Portable Solar Panel',
          'Power Bank',
          'Travel Adapter',
          'Packing Cubes',
          'Weekender Bag',
          'Compression Socks',
          'Neck Pillow',
          'Sleep Mask',
          'Travel Laundry Bag',
          'Refillable Toiletry Bottles',
          'Skipping Rope',
          'Foam Roller',
          'Yoga Block',
          'Resistance Band Set',
          'Adjustable Dumbbells',
          'Kettlebell',
          'Massage Gun',
          'Pickleball Paddle',
          'Tabletop Game Set',
          'Card Sleeves',
          'Puzzle Book',
          'Cocktail Shaker',
          'Reusable Ice Cubes',
          'Crystal Decanter',
          'Charcuterie Board',
          'Pizza Stone',
          'Pasta Machine',
          'Garden Tool Set',
          'Indoor Herb Kit',
          'Seedling Tray',
          'Mini Greenhouse',
          'Watering Can',
          'Ceramic Planter',
          'Compost Caddy',
          'Air Purifier',
          'Dehumidifier',
          'Tower Fan',
          'Space Heater',
          'Weighted Blanket',
          'Linen Duvet Cover',
          'Silk Pillowcase',
          'Bath Sheet',
          'Quick Dry Towel',
          'Clothes Steamer',
          'Fabric Shaver',
          'Clothes Drying Rack',
          'Shoe Cleaning Kit',
          'Leather Care Kit',
          'Bike Helmet',
          'Bike Lock',
          'Running Waist Belt',
          'Fitness Tracker',
          'Smartwatch',
          'Waterproof Phone Pouch',
          'Portable First Aid Kit',
        ],
      },
      ko: {
        code: 'ko',
        label: '한국어',
        text: {
          ready: '준비됐나요?',
          generate: '시작하기',
          counting: '카운트다운...',
          orientationLandscape: '가로 모드입니다',
          orientationPortrait: '가로로 돌려주세요',
          languageLabel: '언어',
        },
        words: [
          '전기포트',
          '인덕션 레인지',
          '무선 청소기',
          '공기청정기',
          '제습기',
          '서큘레이터',
          '미니 선풍기',
          '전기장판',
          '온열 담요',
          '메모리폼 베개',
          '쿨링 매트',
          '린넨 침구',
          '호텔식 베개커버',
          '머그 워머',
          '유리 티포트',
          '보온 텀블러',
          '김치통',
          '밀폐 용기 세트',
          '스테인리스 도시락',
          '이유식 용기',
          '유리 반찬통',
          '에어프라이어',
          '전자레인지용 찜기',
          '주방 저울',
          '분쇄기',
          '핸드 블렌더',
          '미니 밥솥',
          '슬로우쿠커',
          '무쇠 프라이팬',
          '주물 냄비',
          '돌솥',
          '구이판',
          '김밥 매트',
          '만두 찜판',
          '실리콘 주걱',
          '계량컵 세트',
          '국자 거치대',
          '냄비 받침',
          '실리콘 손잡이',
          '주방 타이머',
          '칼갈이',
          '도마 살균기',
          '식기건조 매트',
          '싱크롤 선반',
          '빨래 건조대',
          '세탁망',
          '섬유 탈취제',
          '핸디 스티머',
          '보풀 제거기',
          '다용도 바스켓',
          '모듈 선반',
          '회전 트레이',
          '슬라이딩 수납장',
          '좌식 테이블',
          '접이식 캠핑 체어',
          '감성 랜턴',
          '미니 빔프로젝터',
          '휴대용 보조배터리',
          'PD 충전기',
          '멀티탭',
          'USB 선풍기',
          '핸드폰 거치대',
          '무선 이어폰',
          '블루투스 스피커',
          '노이즈캔슬링 헤드폰',
          '태블릿 거치대',
          '터치펜',
          '스마트워치',
          '러닝 벨트',
          '필라테스 밴드',
          '폼롤러',
          '요가 블록',
          '마사지 볼',
          '핫팩',
          '아이스팩',
          '피크닉 매트',
          '접이식 바구니',
          '방수 파우치',
          '여행 파우치 세트',
          '여권 지갑',
          '캐리어 오거나이저',
          '방수 슬리퍼',
          '초경량 우산',
        ],
      },
      ja: {
        code: 'ja',
        label: '日本語',
        text: {
          ready: '準備OK？',
          generate: 'スタート',
          counting: 'カウント中...',
          orientationLandscape: '横向きになっています',
          orientationPortrait: '横向きにしてください',
          languageLabel: '言語',
        },
        words: [
          '電気ケトル',
          'IHコンロ',
          'コードレス掃除機',
          '空気清浄機',
          '除湿機',
          'サーキュレーター',
          '加湿器',
          '電気毛布',
          'ひざ掛け',
          '低反発まくら',
          '接触冷感シーツ',
          'リネン掛け布団カバー',
          'マグウォーマー',
          '急須',
          '保温ボトル',
          '曲げわっぱ弁当箱',
          'ステンレス保存容器',
          'ガラス保存容器',
          '土鍋',
          'ホットプレート',
          '卓上IHコンロ',
          '鍋つかみ',
          'せいろ蒸し器',
          'おにぎり型',
          '寿司巻きす',
          'しゃもじ',
          '計量カップ',
          'だしポット',
          'おろし金',
          '卵焼きフライパン',
          '鉄フライパン',
          '南部鉄器鍋',
          'すり鉢',
          'サラダスピナー',
          'シリコンヘラ',
          '保存袋クリップ',
          '卓上醤油差し',
          '茶筒',
          '漆塗りお椀',
          '折りたたみ水切り',
          '食器用水切りマット',
          '布巾ハンガー',
          '布団乾燥機',
          '物干しハンガー',
          '洗濯ネット',
          '衣類スチーマー',
          '毛玉取り',
          '風呂桶',
          'バスチェア',
          '珪藻土バスマット',
          '玄関マット',
          '収納スツール',
          'ランドリーバスケット',
          '折りたたみデスク',
          'フロアクッション',
          '座椅子',
          'ミニプロジェクター',
          '充電式ランタン',
          'モバイルバッテリー',
          '急速充電器',
          '電源タップ',
          'ケーブルボックス',
          'ワイヤレスイヤホン',
          'ノイズキャンセリングヘッドホン',
          'タブレットスタンド',
          'ペンタブレット',
          'スマートウォッチ',
          '万歩計',
          'フィットネスバンド',
          'ヨガマット',
          'ストレッチポール',
          'マッサージボール',
          '湯たんぽ',
          'アロマディフューザー',
          'お香スタンド',
          '折りたたみ傘',
          'レインコート',
          'スーツケースベルト',
          '旅行圧縮バッグ',
          'パッキングキューブ',
          'アイマスク',
          'ネックピロー',
          '保冷剤',
          'アイスリング',
        ],
      },
      es: {
        code: 'es',
        label: 'Español',
        text: {
          ready: '¿Listo?',
          generate: 'Generar',
          counting: 'Contando...',
          orientationLandscape: 'Pantalla en horizontal',
          orientationPortrait: 'Gira el teléfono',
          languageLabel: 'Idioma',
        },
        words: [
          'Hervidor eléctrico',
          'Cocina de inducción',
          'Aspiradora inalámbrica',
          'Purificador de aire',
          'Deshumidificador',
          'Ventilador de torre',
          'Calefactor cerámico',
          'Manta térmica',
          'Almohada viscoelástica',
          'Sábanas de algodón',
          'Cobija ligera',
          'Termo de acero',
          'Botella térmica',
          'Mate con bombilla',
          'Set de tuppers de vidrio',
          'Fiambrera de acero',
          'Contenedor hermético',
          'Envasadora al vacío',
          'Freidora de aire',
          'Olla de presión eléctrica',
          'Arrocera',
          'Licuadora de inmersión',
          'Procesador de alimentos',
          'Batidora de mano',
          'Molino de café',
          'Cafetera italiana',
          'Prensa francesa',
          'Molinillo de especias',
          'Tabla de bambú',
          'Sartén de hierro',
          'Plancha para asar',
          'Parrilla de mesa',
          'Tabla para asado',
          'Termómetro de cocina',
          'Juego de cuchillos',
          'Afilador de cuchillos',
          'Moldes de silicona',
          'Escurridor plegable',
          'Mantel antimanchas',
          'Organizadores para despensa',
          'Especiero magnético',
          'Lámpara de escritorio',
          'Luz de lectura con pinza',
          'Organizador de cables',
          'Cargador inalámbrico',
          'Teclado mecánico',
          'Mouse ergonómico',
          'Barra de luz para monitor',
          'Soporte para laptop',
          'Soporte para celular',
          'Bocina bluetooth',
          'Audífonos con cancelación',
          'Audífonos inalámbricos',
          'Parlante portátil',
          'Cámara instantánea',
          'Impresora fotográfica',
          'Trípode ligero',
          'Cerradura inteligente',
          'Enchufe inteligente',
          'Foco inteligente',
          'Tira LED',
          'Banco de energía',
          'Panel solar portátil',
          'Adaptador universal',
          'Cubos de viaje',
          'Riñonera',
          'Morral antirrobo',
          'Billetera RFID',
          'Almohada de viaje',
          'Máscara para dormir',
          'Bolsa para ropa húmeda',
          'Botella plegable',
          'Bandas de resistencia',
          'Rueda abdominal',
          'Balón medicinal',
          'Esterilla de yoga',
          'Pistola de masaje',
          'Carrito plegable',
          'Candado para bici',
          'Casco para bici',
          'Impermeable ligero',
          'Sombrero para el sol',
          'Organizador de maletero',
          'Bolsa térmica',
          'Juego de mesa compacto',
          'Libro de sopa de letras',
          'Kit de primeros auxilios',
        ],
      },
      fr: {
        code: 'fr',
        label: 'Français',
        text: {
          ready: 'Prêt ?',
          generate: 'Générer',
          counting: 'Compte...',
          orientationLandscape: 'Affichage paysage',
          orientationPortrait: 'Tourne le téléphone',
          languageLabel: 'Langue',
        },
        words: [
          'Bouilloire électrique',
          'Plaque à induction',
          'Aspirateur sans fil',
          "Purificateur d'air",
          'Déshumidificateur',
          'Ventilateur colonne',
          'Radiateur soufflant',
          'Couverture chauffante',
          'Oreiller mémoire de forme',
          'Draps en lin',
          'Housse de couette',
          'Mug chauffant',
          'Théière en verre',
          'Carafe filtrante',
          'Bouteille isotherme',
          'Boîte à bento inox',
          'Boîte hermétique en verre',
          'Lot de bocaux',
          'Poêle en fonte',
          'Cocotte en fonte',
          'Plancha',
          'Raclette de table',
          'Appareil à fondue',
          'Gaufrier',
          'Crêpière',
          'Mixeur plongeant',
          'Robot culinaire',
          'Balance de cuisine',
          'Moulin à épices',
          'Moulin à café manuel',
          'Planche à découper bambou',
          'Tapis de cuisson silicone',
          'Tamis à farine',
          'Essoreuse à salade',
          'Porte-couteaux aimanté',
          'Égouttoir pliable',
          'Bloc prises multiprise',
          'Organiseur de câbles',
          'Lampe de bureau',
          "Barre lumineuse d'écran",
          'Station de charge sans fil',
          'Clavier mécanique',
          'Souris ergonomique',
          "Support d'ordinateur portable",
          'Support de téléphone',
          'Enceinte bluetooth',
          'Casque antibruit',
          'Écouteurs sans fil',
          'Appareil photo instantané',
          'Imprimante photo',
          'Trépied compact',
          'Serrure connectée',
          'Sonnette vidéo',
          'Prise connectée',
          'Ampoule connectée',
          'Bande LED',
          'Batterie externe',
          'Panneau solaire pliable',
          'Adaptateur voyage',
          'Organiseur valise',
          'Sac week-end',
          'Sac banane',
          'Sac à dos urbain',
          'Coussin de voyage',
          'Masque de nuit',
          'Bouteille pliable',
          'Tapis de yoga',
          'Rouleau de massage',
          'Bande de résistance',
          'Haltères réglables',
          'Kettlebell',
          'Pistolet de massage',
          "Tapis d'acupression",
          'Plaid à manches',
          "Diffuseur d'huiles",
          'Bougie parfumée',
          'Boîte à bijoux',
          "Vide-poche d'entrée",
          'Panier à linge pliable',
          'Trousse de secours portable',
          'Cadenas vélo',
          'Casque vélo',
          'Poncho imperméable',
          'Chapeau de soleil',
          'Glacière souple',
          'Jeu de société compact',
          'Carnet à pages pointillées',
          'Stylo plume',
          'Lampe frontale',
        ],
      },
      zh: {
        code: 'zh-Hans',
        label: '中文 (普通话)',
        text: {
          ready: '准备好了吗？',
          generate: '开始',
          counting: '倒计时...',
          orientationLandscape: '已切换横屏',
          orientationPortrait: '请旋转到横屏',
          languageLabel: '语言',
        },
        words: [
          '电热水壶',
          '便携电磁炉',
          '无线吸尘器',
          '空气净化器',
          '除湿机',
          '循环扇',
          '加湿器',
          '电热毯',
          '乳胶枕',
          '冰感凉席',
          '天丝床单',
          '保温杯',
          '玻璃茶壶',
          '公道杯',
          '饭盒套装',
          '不锈钢餐盒',
          '玻璃保鲜盒',
          '真空保鲜机',
          '电饭煲',
          '电压力锅',
          '养生壶',
          '炖盅',
          '砂锅',
          '铸铁平底锅',
          '不粘炒锅',
          '蒸笼',
          '饺子垫',
          '擀面杖',
          '煎饼铛',
          '煎烤盘',
          '量杯量勺',
          '硅胶铲',
          '削皮器',
          '厨房秤',
          '油壶',
          '密封调料罐',
          '磁吸刀架',
          '折叠沥水架',
          '碗碟收纳架',
          '洗碗布晾架',
          '收纳分隔板',
          '旋转调料盘',
          '智能马桶盖',
          '拖鞋烘干架',
          '衣物蒸汽机',
          '除毛球器',
          '收纳压缩袋',
          '旅行分装瓶',
          '整理收纳箱',
          '免钉挂钩',
          '粘贴式拖把架',
          '落地衣架',
          '折叠晾衣架',
          '便携风扇',
          '手持小风扇',
          '充电暖手宝',
          '颈部按摩仪',
          '筋膜枪',
          '瑜伽垫',
          '瑜伽砖',
          '弹力带',
          '跳绳',
          '泡沫轴',
          '冰敷袋',
          '热敷袋',
          '防水手机袋',
          '旅行插头',
          '行李分层包',
          '护照套',
          '折叠旅行包',
          '户外保温壶',
          '折叠水桶',
          '野餐垫',
          '便携野餐桌',
          '露营灯',
          '充电营灯',
          '便携咖啡壶',
          '随身过滤水壶',
          '车载香薰',
          '车载吸尘器',
          '后备箱收纳箱',
          '磁吸手机支架',
          '蓝牙音箱',
          '降噪耳机',
          '智能手表',
          '体脂称',
          '小型投影仪',
        ],
      },
      hi: {
        code: 'hi',
        label: 'हिन्दी (India)',
        text: {
          ready: 'तैयार हैं?',
          generate: 'शुरू करें',
          counting: 'गिनती जारी...',
          orientationLandscape: 'लैंडस्केप ठीक है',
          orientationPortrait: 'कृपया फोन घुमाएँ',
          languageLabel: 'भाषा',
        },
        words: [
          'इलेक्ट्रिक केतली',
          'इंडक्शन कुकर',
          'वायरलेस वैक्यूम',
          'एयर प्यूरीफायर',
          'डीह्यूमिडिफायर',
          'टेबल फैन',
          'हीटेड कंबल',
          'गर्म पानी की बोतल',
          'मेमरी फोम तकिया',
          'मुलायम रज़ाई',
          'तांबे की बोतल',
          'स्टील टिफिन',
          'मसाला डब्बा',
          'स्टेनलेस लंच बॉक्स',
          'कांच का डब्बा सेट',
          'इडली स्टीमर',
          'डोसा तवा',
          'प्रेशर कुकर',
          'कुकर सेपरेटर सेट',
          'मसाला ग्राइंडर',
          'चाय छलनी',
          'फ़िल्टर कॉफी मेकर',
          'बेलन चकला',
          'मोदक सांचा',
          'चपाती प्रेस',
          'लोहे की कड़ाही',
          'तड़का पैन',
          'सिलिकॉन कलछी',
          'माप कप सेट',
          'स्टील झारा',
          'आटा छन्नी',
          'मूसल खरल',
          'पीतल का दीया',
          'अगरबत्ती होल्डर',
          'लड्डू बॉक्स',
          'अचार का जार',
          'स्टील थाली सेट',
          'लस्सी ग्लास',
          'कुल्हड़ सेट',
          'मिट्टी की हांडी',
          'मटका फिल्टर',
          'कॉपर लोटा',
          'कपड़ा सुखाने वाला स्टैंड',
          'फोल्डिंग हैंगर',
          'स्टीम आयरन',
          'लिंट रिमूवर',
          'जूता पॉलिश किट',
          'टॉयलेट्री पाउच',
          'मच्छरदानी',
          'इलेक्ट्रिक मच्छर रैकेट',
          'सुगंध डिफ्यूज़र',
          'कॉटन मैट्रेस प्रोटेक्टर',
          'चादर सेट',
          'यात्रा तकिया',
          'नींद मास्क',
          'पावर बैंक',
          'यूनिवर्सल एडाप्टर',
          'ट्रैवल क्यूब सेट',
          'पासपोर्ट कवर',
          'एंटी थेफ्ट बैकपैक',
          'स्टील पानी की बोतल',
          'थर्मल फ्लास्क',
          'योगा मैट',
          'योगा ब्लॉक',
          'रेसिस्टेंस बैंड',
          'स्किपिंग रोप',
          'मसाज रोलर',
          'घुटना सपोर्ट',
          'आइस जेल पैक',
          'प्राथमिक चिकित्सा किट',
        ],
      },
    };

    const wordDisplay = document.getElementById('wordDisplay');
    const generateBtn = document.getElementById('generateBtn');
    const countdown = document.getElementById('countdown');
    const countdownNumber = document.getElementById('countdownNumber');
    const statusMsg = document.getElementById('statusMsg');
    const orientationMsg = document.getElementById('orientationMsg');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const languageSelect = document.getElementById('languageSelect');
    const languageLabel = document.getElementById('languageLabel');

    let wakeLock = null;
    let countdownTimer = null;
    let lastWordByLocale = {};
    let currentLocale = 'en';
    let fitRerunTimers = [];

    const getLocale = () => locales[currentLocale] || locales.en;
    const t = (key) => getLocale().text?.[key] || locales.en.text[key] || '';

    const populateLanguagePicker = () => {
      languageSelect.innerHTML = '';
      Object.entries(locales).forEach(([value, locale]) => {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = locale.label;
        option.selected = value === currentLocale;
        languageSelect.append(option);
      });
    };

    const getCurrentWords = () => getLocale().words || locales.en.words;

    const getRandomWord = () => {
      const words = getCurrentWords();
      if (words.length === 0) return 'Product';
      if (words.length === 1) return words[0];
      const lastWord = lastWordByLocale[currentLocale];
      let next = words[Math.floor(Math.random() * words.length)];
      let attempts = 0;
      while (next === lastWord && attempts < 10) {
        next = words[Math.floor(Math.random() * words.length)];
        attempts += 1;
      }
      lastWordByLocale[currentLocale] = next;
      return next;
    };

    const updateOrientationNote = () => {
      const landscape = window.matchMedia('(orientation: landscape)').matches;
      orientationMsg.textContent = landscape ? t('orientationLandscape') : t('orientationPortrait');
      orientationMsg.style.color = landscape ? 'var(--muted)' : 'var(--criteo-orange)';
      orientationMsg.style.borderStyle = landscape ? 'dashed' : 'solid';
    };

    const requestWakeLock = async () => {
      if (!('wakeLock' in navigator)) {
        statusMsg.textContent = 'Screen wake lock not supported on this device.';
        return;
      }
      try {
        wakeLock = await navigator.wakeLock.request('screen');
        statusMsg.textContent = 'Keeping your screen awake.';
        wakeLock.addEventListener('release', () => {
          statusMsg.textContent = 'Screen may dim — tap Generate to keep it awake.';
        });
      } catch (err) {
        statusMsg.textContent = 'Wake lock failed: ' + err.message;
      }
    };

    document.addEventListener('visibilitychange', () => {
      if (wakeLock !== null && document.visibilityState === 'visible') {
        requestWakeLock();
      }
    });

    const setRevealing = (isRevealing) => {
      document.body.classList.toggle('revealing', isRevealing);
    };

    const applyLocale = () => {
      const locale = getLocale();
      document.documentElement.lang = locale.code || currentLocale;
      languageLabel.textContent = t('languageLabel');
      generateBtn.textContent = t('generate');
      if (!countdown.classList.contains('visible') && !document.body.classList.contains('revealing')) {
        wordDisplay.textContent = t('ready');
      }
      updateOrientationNote();
      scheduleFit();
    };

    const forceScrollTop = () => {
      const doScroll = () => {
        window.scrollTo({ top: 0, left: 0, behavior: 'auto' });
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
      };

      doScroll();
      requestAnimationFrame(doScroll);
      setTimeout(doScroll, 30);

      let attempts = 0;
      const maxAttempts = 5;
      const interval = setInterval(() => {
        doScroll();
        attempts += 1;
        const atTop = (window.scrollY || document.documentElement.scrollTop || document.body.scrollTop) === 0;
        if (atTop || attempts >= maxAttempts) {
          clearInterval(interval);
        }
      }, 40);
    };

    const fitWordToViewport = () => {
      const target = wordDisplay;
      const screen = document.querySelector('.screen');
      if (!target || !screen) return;

      // Prefer keeping words intact; only allow breaking if nothing fits.
      target.style.wordBreak = 'keep-all';
      target.style.overflowWrap = 'normal';

      const screenStyles = getComputedStyle(screen);
      const paddingX = parseFloat(screenStyles.paddingLeft) + parseFloat(screenStyles.paddingRight);
      const paddingY = parseFloat(screenStyles.paddingTop) + parseFloat(screenStyles.paddingBottom);
      const gap = parseFloat(screenStyles.rowGap || screenStyles.gap || 0);

      const visibleFlowChildren = Array.from(screen.children).filter((el) => {
        const pos = getComputedStyle(el).position;
        return el.offsetParent !== null && pos !== 'absolute' && pos !== 'fixed';
      });

      const siblingsHeight = visibleFlowChildren
        .filter((el) => el !== target)
        .reduce((total, el) => total + el.getBoundingClientRect().height, 0);

      const gapCount = Math.max(visibleFlowChildren.length - 1, 0);
      const gapTotal = gapCount * gap;

      const minSize = 28;
      const maxWidth = Math.max(screen.clientWidth - paddingX, minSize);
      const availableHeight = screen.clientHeight - paddingY - siblingsHeight - gapTotal;
      if (availableHeight <= 0) {
        target.style.fontSize = `${minSize}px`;
        return;
      }
      const maxHeight = Math.max(availableHeight, minSize);
      const maxSize = Math.max(minSize, Math.min(maxWidth, maxHeight));

      let low = minSize;
      let high = maxSize;
      let best = minSize;

      while (low <= high) {
        const mid = Math.floor((low + high) / 2);
        target.style.fontSize = `${mid}px`;
        const { scrollWidth, scrollHeight } = target;
        const fits = scrollWidth <= maxWidth && scrollHeight <= maxHeight;
        if (fits) {
          best = mid;
          low = mid + 1;
        } else {
          high = mid - 1;
        }
      }

      target.style.fontSize = `${best}px`;

      // If even the smallest size can't fit, allow breaking as a last resort.
      const { scrollWidth, scrollHeight } = target;
      const overflowed = scrollWidth > maxWidth || scrollHeight > maxHeight;
      if (overflowed) {
        target.style.wordBreak = 'break-word';
        target.style.overflowWrap = 'break-word';
      }
    };

    const scheduleFit = () => {
      fitWordToViewport();
      fitRerunTimers.forEach(clearTimeout);
      fitRerunTimers = [
        setTimeout(fitWordToViewport, 160),
        setTimeout(fitWordToViewport, 360),
      ];
    };

    const scrollWordIntoView = () => {
      forceScrollTop();
    };

    const syncFullscreenButton = () => {
      const isFullscreen = Boolean(document.fullscreenElement || document.webkitFullscreenElement);
      fullscreenBtn.textContent = isFullscreen ? 'Exit Full Screen' : 'Full Screen';
    };

    const toggleFullscreen = async () => {
      try {
        const root = document.documentElement;
        const enter = root.requestFullscreen || root.webkitRequestFullscreen;
        const exit = document.exitFullscreen || document.webkitExitFullscreen;

        if (!enter) {
          statusMsg.textContent = 'Fullscreen not supported on this browser.';
          return;
        }

        if (document.fullscreenElement || document.webkitFullscreenElement) {
          await exit?.call(document);
        } else {
          await enter.call(root);
        }
      } catch (err) {
        statusMsg.textContent = 'Fullscreen blocked: ' + err.message;
      } finally {
        syncFullscreenButton();
      }
    };

    const showWord = (word) => {
      scrollWordIntoView();
      wordDisplay.textContent = word;
      setRevealing(true);
      scheduleFit();
      generateBtn.disabled = false;
      generateBtn.textContent = t('generate');
    };

    const startCountdown = (word) => {
      countdown.classList.add('visible');
      let count = 3;
      countdownNumber.textContent = count;

      const tick = () => {
        count -= 1;
        if (count === 0) {
          countdown.classList.remove('visible');
          showWord(word);
          return;
        }
        countdownNumber.textContent = count;
        countdownTimer = setTimeout(tick, 1000);
      };

      countdownTimer = setTimeout(tick, 1000);
    };

    const startSequence = async () => {
      if (countdownTimer) {
        clearTimeout(countdownTimer);
      }
      scrollWordIntoView(); // Reset scroll so the reveal fills the screen
      setRevealing(false);
      generateBtn.disabled = true;
      generateBtn.textContent = t('counting');
      await requestWakeLock();
      const nextWord = getRandomWord();
      startCountdown(nextWord);
    };

    generateBtn.addEventListener('click', startSequence);
    fullscreenBtn.addEventListener('click', toggleFullscreen);
    document.addEventListener('fullscreenchange', () => {
      syncFullscreenButton();
      scheduleFit();
    });
    document.addEventListener('webkitfullscreenchange', () => {
      syncFullscreenButton();
      scheduleFit();
    });

    window.addEventListener('resize', () => {
      updateOrientationNote();
      scheduleFit();
    });
    window.addEventListener('orientationchange', () => {
      updateOrientationNote();
      scheduleFit();
    });
    if (window.visualViewport) {
      window.visualViewport.addEventListener('resize', scheduleFit);
    }

    languageSelect.addEventListener('change', (event) => {
      currentLocale = event.target.value;
      lastWordByLocale[currentLocale] = '';
      if (countdownTimer) {
        clearTimeout(countdownTimer);
      }
      countdown.classList.remove('visible');
      setRevealing(false);
      statusMsg.textContent = '';
      generateBtn.disabled = false;
      applyLocale();
    });

    populateLanguagePicker();
    applyLocale();
    syncFullscreenButton();
    if (document.fonts?.ready) {
      document.fonts.ready.then(scheduleFit);
    } else {
      scheduleFit();
    }
  </script>
</body>
</html>
